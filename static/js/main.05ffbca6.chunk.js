(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{10:function(e,t,n){e.exports={form:"RegisterView_form__8zR94",title:"RegisterView_title__1Gvzv",formLbl:"RegisterView_formLbl__1MkM9",inputLbl:"RegisterView_inputLbl__1_zw7",btnInput:"RegisterView_btnInput__2HTXZ"}},13:function(e,t,n){e.exports={form:"LoginView_form__3oDl6",label:"LoginView_label__2QAW5",input:"LoginView_input__2fLKU",btn:"LoginView_btn__3xinw"}},16:function(e,t,n){e.exports={form:"Form_form__3xWK_",formLbl:"Form_formLbl__1hXjF",inputLbl:"Form_inputLbl__37K9B",btnInput:"Form_btnInput__1F7Nq"}},18:function(e,t,n){e.exports={contactLists:"ContactList_contactLists__3lGgJ",contactItem:"ContactList_contactItem__jwh3v",contactName:"ContactList_contactName__jZFpM",btnDelete:"ContactList_btnDelete__2aMwc"}},28:function(e,t,n){e.exports={filteredInputLabel:"Filter_filteredInputLabel__2vUqY",filteredInput:"Filter_filteredInput__3JPdb"}},39:function(e,t){},46:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(23),s=n.n(r),i=(n(46),n(4)),o=n(2),u=n(39),l=n.n(u),b=n(24),j=function(e){return e.contacts.items},d=function(e){return e.contacts.filter},f=function(e){return e.contacts.isLoading},p=Object(b.a)([j,d],(function(e,t){var n=t.toLowerCase().trim();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),O=n(1);var m=function(){var e=Object(i.c)(f);return Object(O.jsx)("div",{children:!e&&Object(O.jsx)("h2",{children:"Your Phonebook!"})})},h=n(25),x=function(e){return e.auth.isLoggedIn},v=["children","restricted","redirectTo"];function g(e){var t=e.children,n=e.restricted,a=void 0!==n&&n,c=e.redirectTo,r=void 0===c?"/":c,s=(Object(h.a)(e,v),Object(i.c)(x)&&a);return Object(O.jsxs)("div",{children:[s?Object(O.jsx)(o.a,{to:r}):t,";"]})}var _=["children","restricted","redirectTo"];function w(e){var t=e.children,n=(e.restricted,e.redirectTo),a=void 0===n?"/register":n,c=(Object(h.a)(e,_),Object(i.c)(x));return Object(O.jsxs)("div",{children:[c?t:Object(O.jsx)(o.a,{to:a}),";"]})}var L=n(6),N=n(7),C=n.n(N),k=n(15),y=n(12),I=n.n(y),S=n(3);I.a.defaults.baseURL="https://connections-api.herokuapp.com";var R=function(e){I.a.defaults.headers.common.Authorization="Bearer ".concat(e)},F=function(){I.a.defaults.headers.common.Authorization=""},A=Object(S.c)("auth/register",function(){var e=Object(k.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.post("/users/signup".credentials);case 3:return n=e.sent,a=n.data,R(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),q=Object(S.c)("auth/login",function(){var e=Object(k.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.post("/users/login".credentials);case 3:return n=e.sent,a=n.data,R(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),z=Object(S.c)("auth/logout",Object(k.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.post("/users/logout");case 3:F(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),T=Object(S.c)("auth/refresh",function(){var e=Object(k.a)(C.a.mark((function e(t,n){var a,c,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(c=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return R(c),e.prev=5,e.next=8,I.a.get("/users/current");case 8:return r=e.sent,s=r.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),V=n(13),D=n.n(V),E=function(){var e=Object(a.useState)(""),t=Object(L.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(L.a)(r,2),o=s[0],u=s[1],l=Object(i.b)(),b=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return c(a);case"password":return u(a);default:return}};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:D.a.title,children:"Sign in"}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefalt(),l(q({email:n,password:o})),c(""),u("")},className:D.a.form,autoComplete:"off",children:[Object(O.jsxs)("label",{className:D.a.label,children:[Object(O.jsx)("p",{className:D.a.text,children:"Email"}),Object(O.jsx)("input",{type:"email",name:"email",value:n,onChange:b,className:D.a.input})]}),Object(O.jsxs)("label",{className:D.a.label,children:[Object(O.jsx)("p",{className:D.a.text,children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",value:o,onChange:b,className:D.a.input})]}),Object(O.jsx)("button",{type:"submit",className:D.a.btn,children:"sign in"})]})]})},M=n(10),J=n.n(M);var U=function(){var e=Object(a.useState)(""),t=Object(L.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(L.a)(r,2),o=s[0],u=s[1],l=Object(a.useState)(""),b=Object(L.a)(l,2),j=b[0],d=b[1],f=Object(i.b)(),p=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"name":return c(a);case"email":return u(a);case"password":return d(a);default:return}};return Object(O.jsxs)("div",{className:J.a.form,children:[Object(O.jsx)("h1",{className:J.a.title,children:"Registration"}),Object(O.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),f(A({name:n,email:o,password:j})),c(""),u(""),d("")},className:J.a.formLbl,children:[Object(O.jsxs)("label",{className:J.a.formLbl,children:[Object(O.jsx)("p",{className:J.a.text,children:"Name"}),Object(O.jsx)("input",{type:"text",name:"name",value:n,required:!0,onChange:p,className:J.a.inputLbl})]}),Object(O.jsxs)("label",{className:J.a.formLbl,children:[Object(O.jsx)("span",{className:J.a.text,children:"e-mail"}),Object(O.jsx)("input",{type:"email",name:"email",value:o,required:!0,onChange:p,className:J.a.inputLbl})]}),Object(O.jsxs)("label",{className:J.a.formLbl,children:[Object(O.jsx)("span",{className:J.a.text,children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",value:j,required:!0,onChange:p,className:J.a.inputLbl})]}),Object(O.jsx)("button",{type:"submit",className:J.a.btnInput,children:"Registration"})]})]})},Z=n(16),B=n.n(Z),P=n(77);I.a.defaults.baseURL="https://connections-api.herokuapp.com";var K=Object(S.c)("contact/fetchContact",Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/contacts");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),W=Object(S.c)("contact/addContact",function(){var e=Object(k.a)(C.a.mark((function e(t){var n,a,c,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.number,c={name:n,number:a},e.next=4,I.a.post("/contacts",c);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(S.c)("contact/deleteContact",function(){var e=Object(k.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.delete("/contacts/".concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var X=function(e){e.onSubmit;var t=Object(a.useState)(""),n=Object(L.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(L.a)(s,2),u=o[0],l=o[1],b=Object(i.c)(j),d=Object(i.b)(),f=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"number":l(a);break;default:return}},p=function(){r(""),l("")},m=Object(P.a)(),h=Object(P.a)();return Object(O.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),b.map((function(e){return e.name})).includes(c))alert("".concat(c," is already in contacs."));else{var t=Object(P.a)();d(W({id:t,name:c,number:u})),p()}},className:B.a.form,children:[Object(O.jsxs)("label",{htmlFor:m,className:B.a.formLbl,children:[" ","Name",Object(O.jsx)("input",{type:"text",name:"name",value:c,onChange:f,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,className:B.a.inputLbl})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{htmlFor:h,className:B.a.formLbl,children:["Number",Object(O.jsx)("input",{type:"tel",name:"number",value:u,onChange:f,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,className:B.a.inputLbl})]}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",className:B.a.btnInput,children:"Add Contact"})]})},Y=n(18),H=n.n(Y);var Q=function(){var e=Object(i.c)(p),t=Object(i.c)(f),n=Object(i.b)();return Object(a.useEffect)((function(){n(K())}),[n]),!t&&e&&Object(O.jsx)("ul",{className:H.a.contactLists,children:e.map((function(e){var t=e.name,a=e.number,c=e.id;return Object(O.jsxs)("li",{className:H.a.contactItem,children:[Object(O.jsxs)("p",{className:H.a.contactName,children:[t,": ",Object(O.jsx)("span",{className:H.a.contactNumber,children:a})]}),Object(O.jsx)("button",{type:"button",onClick:function(){return n(G(c))},className:H.a.btnDelete,children:"Delete"})]},c)}))})},$=n(28),ee=n.n($),te=(Object(S.b)("contact/fetchContactsRequest"),Object(S.b)("contact/fetchContactsSuccess"),Object(S.b)("contact/fetchContactsError"),Object(S.b)("contact/addContactRequest"),Object(S.b)("contact/addContactSuccess"),Object(S.b)("contact/addContactError"),Object(S.b)("deleteContact/deleteContactRequest"),Object(S.b)("deleteContact/deleteContactSuccess"),Object(S.b)("deleteContact/deleteContactError"),Object(S.b)("contacts/filterContact"));var ne=function(){var e=Object(i.c)(d),t=Object(i.b)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("label",{className:ee.a.filterInputLabel,children:"Find contacts by name"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:ee.a.filteredInput,type:"text",name:"filter",value:e,onChange:function(e){return t(te(e.target.value))},placeholder:"Contact"})]})};var ae=function(){var e=Object(i.b)();return Object(a.useEffect)((function(){e(K())}),[e]),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(X,{}),Object(O.jsx)(ne,{})]}),Object(O.jsx)("div",{children:Object(O.jsx)(Q,{})})]})};var ce,re,se,ie=function(){var e=Object(i.b)();return Object(a.useEffect)((function(){e(x.fetchCurrentUser())}),[e]),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(l.a,{}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/",element:Object(O.jsx)(g,{restricted:!0,redirectTo:"/contacts",children:Object(O.jsx)(m,{})})}),Object(O.jsx)(o.b,{path:"/register",element:Object(O.jsx)(g,{restricted:!0,children:Object(O.jsx)(U,{})})}),Object(O.jsx)(o.b,{path:"/login",element:Object(O.jsxs)(g,{restricted:!0,children:[" ",Object(O.jsx)(E,{})]})}),Object(O.jsx)(o.b,{path:"/contacts",element:Object(O.jsx)(w,{redirectTo:"/login",children:Object(O.jsx)(ae,{})})})]})]})},oe=n(14),ue=n(29),le=n.n(ue),be=n(5),je=n(41),de=n(8),fe=Object(S.d)([],(ce={},Object(be.a)(ce,K.fulfilled,(function(e,t){return t.payload})),Object(be.a)(ce,W.fulfilled,(function(e,t){return[t.payload].concat(Object(je.a)(e))})),Object(be.a)(ce,G.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),ce)),pe=Object(S.d)(!1,(re={},Object(be.a)(re,K.pending,(function(){return!0})),Object(be.a)(re,K.fulfilled,(function(){return!1})),Object(be.a)(re,K.rejected,(function(){return!1})),Object(be.a)(re,W.pending,(function(){return!0})),Object(be.a)(re,W.fulfilled,(function(){return!1})),Object(be.a)(re,W.rejected,(function(){return!1})),Object(be.a)(re,G.pending,(function(){return!0})),Object(be.a)(re,G.fulfilled,(function(){return!1})),Object(be.a)(re,G.rejected,(function(){return!1})),re)),Oe=Object(S.d)("",Object(be.a)({},te,(function(e,t){return t.payload}))),me=Object(S.d)(null,{}),he=Object(de.b)({items:fe,loading:pe,filter:Oe,error:me}),xe=Object(S.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoading:!1,isLoggedIn:!1},extraReducers:(se={},Object(be.a)(se,A.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoading=!1,e.isLoggedIn=!0})),Object(be.a)(se,q.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoading=!1,e.isLoggedIn=!0})),Object(be.a)(se,z.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoading=!1,e.isLoggedIn=!1})),Object(be.a)(se,T.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),se)}).reducer,ve={key:"auth",storage:le.a,whitelist:["token"]},ge={key:"contacts",storage:le.a,whitelist:["items"]},_e=Object(oe.g)(ve,xe),we=Object(oe.g)(ge,he),Le=Object(S.a)({reducer:{auth:_e,contacts:we},middleware:function(e){return e({serializableCheck:{ignoredActions:[oe.a,oe.f,oe.b,oe.c,oe.d,oe.e]}})},devTools:!0}),Ne={store:Le,persistor:Object(oe.h)(Le)},Ce=n(19),ke=n(40);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(i.a,{store:Ne.store,children:Object(O.jsx)(ke.a,{loading:null,persistor:Ne.persistor,children:Object(O.jsx)(Ce.a,{children:Object(O.jsx)(ie,{})})})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.05ffbca6.chunk.js.map